#!/usr/bin/env bash
## Note: this script should be running from
## the root of the repo
set -eu

echo "--- check python coding convention"

flake8 .

echo "--- run unit tests"
# coverage:  --fail-under=MIN
coverage run -m unittest discover tests &&  coverage report

echo '--- print the diff if source code formatting change is detected'

yapf --diff --recursive  .
